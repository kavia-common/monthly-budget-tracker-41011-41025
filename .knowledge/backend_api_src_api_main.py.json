{"is_source_file": true, "format": "Python", "description": "This file defines a FastAPI web server for a Monthly Budget Tracker application. It includes database models with SQLModel, Pydantic schemas, REST API route handlers for authentication, categories, transactions, budgets, a dashboard summary, and seed data population. It sets up middleware, creates database tables on startup, and incorporates various API routers for modularity.", "external_files": ["fastapi", "pydantic", "sqlmodel", "datetime", "typing"], "external_methods": ["fastapi.FastAPI", "fastapi.Depends", "fastapi.HTTPException", "fastapi.Query", "fastapi.Response", "fastapi.status", "fastapi.middleware.cors.CORSMiddleware", "fastapi.routing.APIRouter", "pydantic.BaseModel", "pydantic.Field", "pydantic.field_validator", "sqlmodel.SQLModel", "sqlmodel.Field", "sqlmodel.Relationship", "sqlmodel.Session", "sqlmodel.create_engine", "sqlmodel.select", "datetime.strptime", "datetime.utcnow", "date.fromisoformat"], "published": ["app", "create_db_and_tables", "get_session", "health_check"], "classes": [{"name": "User", "description": "Represents a user with email and hashed password for authentication."}, {"name": "Category", "description": "Represents a transaction category, such as income or expense."}, {"name": "Transaction", "description": "Represents a financial transaction linked to a category and month."}, {"name": "Budget", "description": "Represents a budget limit for a category in a specific month."}, {"name": "TokenResponse", "description": "Schema for token response from login endpoint."}, {"name": "LoginRequest", "description": "Schema for login request payload."}, {"name": "CategoryRead", "description": "Schema for reading category data."}, {"name": "TransactionBase", "description": "Base schema for creating or updating transactions."}, {"name": "TransactionCreate", "description": "Schema for creating a transaction."}, {"name": "TransactionUpdate", "description": "Schema for updating a transaction, allows partial updates."}, {"name": "TransactionRead", "description": "Schema for reading transaction data."}, {"name": "BudgetBase", "description": "Base schema for creating or updating budgets."}, {"name": "BudgetCreate", "description": "Schema for creating a budget."}, {"name": "BudgetUpdate", "description": "Schema for updating a budget, allows partial updates."}, {"name": "BudgetRead", "description": "Schema for reading budget data including spent amount."}, {"name": "DashboardTimeseriesPoint", "description": "Data point representing income and expense for a day in the dashboard."}, {"name": "DashboardSummary", "description": "Aggregate dashboard info for a month including totals, top categories, and timeseries."}], "methods": [{"name": "str _hash_demo_password(p: str)", "description": "Simple demo hashing function for passwords.", "scope": "", "scopeKind": ""}, {"name": "str current_month_str(dt: Optional[datetime] = None)", "description": "Returns the current month in YYYY-MM format.", "scope": "", "scopeKind": ""}, {"name": "str previous_month_str(dt: Optional[datetime] = None)", "description": "Returns the previous month in YYYY-MM format.", "scope": "", "scopeKind": ""}, {"name": "float compute_spent_for_category_month(session: Session, category_id: int, month: str)", "description": "Calculates total spent for a category in a given month.", "scope": "", "scopeKind": ""}, {"name": "Dict[int,Category] get_category_map(session: Session)", "description": "Returns a mapping of category ID to category object.", "scope": "", "scopeKind": ""}, {"name": "Dict[str,str] health_check()", "description": "Health check endpoint returning a status message.", "scope": "", "scopeKind": ""}, {"name": "Tuple[float,float] _calc_income_expense_for_month(session: Session, month: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[DashboardTimeseriesPoint] _calc_timeseries(session: Session, month: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Dict[str,Any]] _calc_top_categories(session: Session, month: str, limit: int = 5)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Category] _ensure_seed_categories(session: Session)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None _seed_transactions_and_budgets(session: Session)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BudgetRead create_budget(payload: BudgetCreate, session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None create_db_and_tables()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TransactionRead create_transaction(payload: TransactionCreate, session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DashboardSummary dashboard_summary( month: Optional[str] = Query(None, description=\"YYYY-MM, defaults to current month\"), session: Session = Depends(get_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Response delete_budget(budget_id: int, session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Response delete_transaction(transaction_id: int, session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Session get_session()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[BudgetRead] list_budgets( month: Optional[str] = Query(None, description=\"Filter by YYYY-MM\"), session: Session = Depends(get_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[CategoryRead] list_categories(session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[TransactionRead] list_transactions( month: Optional[str] = Query(None, description=\"Filter by YYYY-MM\"), session: Session = Depends(get_session), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TokenResponse login(payload: LoginRequest, session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str,Any] seed(session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "BudgetRead update_budget(budget_id: int, payload: BudgetUpdate, session: Session = Depends(get_session))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TransactionRead update_transaction( transaction_id: int, payload: TransactionUpdate, session: Session = Depends(get_session) )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] validate_month(cls, v: Optional[str])", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str validate_month(cls, v: str)", "scope": "BudgetBase", "scopeKind": "class", "description": "unavailable"}], "calls": ["FastAPI()", "Depends()", "select()", "create_engine()", "Session()", "select(User)", "select(Category)", "select(Transaction)", "select(Budget)", "select(TokenResponse)", "select(LoginRequest)", "select(CategoryRead)", "select(TransactionBase)", "select(TransactionCreate)", "select(TransactionUpdate)", "select(TransactionRead)", "select(BudgetBase)", "select(BudgetCreate)", "select(BudgetUpdate)", "select(BudgetRead)", "select(DashboardTimeseriesPoint)", "select(DashboardSummary)", "select(None)", "select(List)", "select(Dict)", "session.exec()", "session.get()", "session.add()", "session.commit()", "session.refresh()"], "search-terms": ["FastAPI", "SQLModel", "transactions", "budgets", "categories", "dashboard", "seed", "auth", "API Router", "database", "models", "schemas"], "state": 2, "file_id": 1, "knowledge_revision": 17, "git_revision": "207e1722a81c8c817c71122d0e86c52621b96b7c", "revision_history": [{"9": "87324853b12a3af519efdee2c0eb8d38c985a221"}, {"10": "207e1722a81c8c817c71122d0e86c52621b96b7c"}, {"13": "207e1722a81c8c817c71122d0e86c52621b96b7c"}, {"15": "207e1722a81c8c817c71122d0e86c52621b96b7c"}, {"16": "207e1722a81c8c817c71122d0e86c52621b96b7c"}, {"17": "207e1722a81c8c817c71122d0e86c52621b96b7c"}], "ctags": [{"_type": "tag", "name": "Budget", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class Budget(SQLModel, table=True):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BudgetBase", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class BudgetBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BudgetCreate", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class BudgetCreate(BudgetBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BudgetRead", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class BudgetRead(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BudgetUpdate", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class BudgetUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Category", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class Category(SQLModel, table=True):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "CategoryRead", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class CategoryRead(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^DATABASE_URL = \"sqlite:\\/\\/\\/.\\/budget.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DashboardSummary", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class DashboardSummary(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DashboardTimeseriesPoint", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class DashboardTimeseriesPoint(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SQLField", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^from sqlmodel import Field as SQLField, Relationship, Session, SQLModel, create_engine, select$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Field"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Transaction", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class Transaction(SQLModel, table=True):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionBase", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class TransactionBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionCreate", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class TransactionCreate(TransactionBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionRead", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class TransactionRead(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TransactionUpdate", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class TransactionUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^class User(SQLModel, table=True):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_calc_income_expense_for_month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def _calc_income_expense_for_month(session: Session, month: str) -> Tuple[float, float]:$/", "language": "Python", "typeref": "typename:Tuple[float,float]", "kind": "function", "signature": "(session: Session, month: str)"}, {"_type": "tag", "name": "_calc_timeseries", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def _calc_timeseries(session: Session, month: str) -> List[DashboardTimeseriesPoint]:$/", "language": "Python", "typeref": "typename:List[DashboardTimeseriesPoint]", "kind": "function", "signature": "(session: Session, month: str)"}, {"_type": "tag", "name": "_calc_top_categories", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def _calc_top_categories(session: Session, month: str, limit: int = 5) -> List[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:List[Dict[str,Any]]", "kind": "function", "signature": "(session: Session, month: str, limit: int = 5)"}, {"_type": "tag", "name": "_ensure_seed_categories", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def _ensure_seed_categories(session: Session) -> List[Category]:$/", "language": "Python", "typeref": "typename:List[Category]", "kind": "function", "signature": "(session: Session)"}, {"_type": "tag", "name": "_hash_demo_password", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def _hash_demo_password(p: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(p: str)"}, {"_type": "tag", "name": "_seed_transactions_and_budgets", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def _seed_transactions_and_budgets(session: Session) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(session: Session)"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    amount: Optional[float] = None$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    amount: float = Field(..., description=\"Positive for income, negative for expense optional; /", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "api_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^api_router = APIRouter(prefix=\"\\/api\", tags=[\"API\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auth_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^auth_router = APIRouter(prefix=\"\\/auth\", tags=[\"auth\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "budgets", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    budgets: List[\"Budget\"] = Relationship(back_populates=\"category\")$/", "language": "Python", "typeref": "typename:List[\"Budget\"]", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "budgets_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^budgets_router = APIRouter(prefix=\"\\/budgets\", tags=[\"budgets\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "categories_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^categories_router = APIRouter(prefix=\"\\/categories\", tags=[\"categories\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category: Optional[Category] = Relationship(back_populates=\"budgets\")$/", "language": "Python", "typeref": "typename:Optional[Category]", "kind": "variable", "scope": "Budget", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category: Optional[Category] = Relationship(back_populates=\"transactions\")$/", "language": "Python", "typeref": "typename:Optional[Category]", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_id: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "BudgetUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_id: Optional[int] = None$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_id: int = Field(..., description=\"Existing category ID.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "BudgetBase", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_id: int = Field(..., description=\"Existing category ID.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_id: int = SQLField(foreign_key=\"category.id\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Budget", "scopeKind": "class"}, {"_type": "tag", "name": "category_id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_id: int = SQLField(foreign_key=\"category.id\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "category_type", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    category_type: str = SQLField(index=True)  # \"income\" | \"expense\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "compute_spent_for_category_month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def compute_spent_for_category_month(session: Session, category_id: int, month: str) -> float:$/", "language": "Python", "typeref": "typename:float", "kind": "function", "signature": "(session: Session, category_id: int, month: str)"}, {"_type": "tag", "name": "create_budget", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def create_budget(payload: BudgetCreate, session: Session = Depends(get_session)) -> BudgetRead:$/", "language": "Python", "typeref": "typename:BudgetRead", "kind": "function", "signature": "(payload: BudgetCreate, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "create_db_and_tables", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def create_db_and_tables() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "create_transaction", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def create_transaction(payload: TransactionCreate, session: Session = Depends(get_session)) -> T/", "language": "Python", "typeref": "typename:TransactionRead", "kind": "function", "signature": "(payload: TransactionCreate, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "current_month_str", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def current_month_str(dt: Optional[datetime] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(dt: Optional[datetime] = None)"}, {"_type": "tag", "name": "dashboard_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^dashboard_router = APIRouter(prefix=\"\\/dashboard\", tags=[\"dashboard\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "dashboard_summary", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def dashboard_summary($/", "language": "Python", "typeref": "typename:DashboardSummary", "kind": "function", "signature": "( month: Optional[str] = Query(None, description=\"YYYY-MM, defaults to current month\"), session: Session = Depends(get_session), )"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    date: Optional[date] = None$/", "language": "Python", "typeref": "typename:Optional[date]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    date: date = Field(..., description=\"Transaction date in ISO format (YYYY-MM-DD).\")$/", "language": "Python", "typeref": "typename:date", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "delete_budget", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def delete_budget(budget_id: int, session: Session = Depends(get_session)) -> Response:$/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "(budget_id: int, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "delete_transaction", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def delete_transaction(transaction_id: int, session: Session = Depends(get_session)) -> Response/", "language": "Python", "typeref": "typename:Response", "kind": "function", "signature": "(transaction_id: int, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    email: str = SQLField(index=True, unique=True)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^engine = create_engine(DATABASE_URL, connect_args={\"check_same_thread\": False})$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_category_map", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def get_category_map(session: Session) -> Dict[int, Category]:$/", "language": "Python", "typeref": "typename:Dict[int,Category]", "kind": "function", "signature": "(session: Session)"}, {"_type": "tag", "name": "get_session", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def get_session() -> Session:$/", "language": "Python", "typeref": "typename:Session", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def health_check() -> Dict[str, str]:$/", "language": "Python", "typeref": "typename:Dict[str,str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    id: Optional[int] = SQLField(default=None, primary_key=True)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "Budget", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    id: Optional[int] = SQLField(default=None, primary_key=True)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    id: Optional[int] = SQLField(default=None, primary_key=True)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    id: Optional[int] = SQLField(default=None, primary_key=True)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "limit", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    limit: Optional[float] = Field(None, ge=0)$/", "language": "Python", "typeref": "typename:Optional[float]", "kind": "variable", "scope": "BudgetUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "limit", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    limit: float = Field(..., ge=0, description=\"Budget limit for the category in the month.\")$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "BudgetBase", "scopeKind": "class"}, {"_type": "tag", "name": "list_budgets", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def list_budgets($/", "language": "Python", "typeref": "typename:List[BudgetRead]", "kind": "function", "signature": "( month: Optional[str] = Query(None, description=\"Filter by YYYY-MM\"), session: Session = Depends(get_session), )"}, {"_type": "tag", "name": "list_categories", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def list_categories(session: Session = Depends(get_session)) -> List[CategoryRead]:$/", "language": "Python", "typeref": "typename:List[CategoryRead]", "kind": "function", "signature": "(session: Session = Depends(get_session))"}, {"_type": "tag", "name": "list_transactions", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def list_transactions($/", "language": "Python", "typeref": "typename:List[TransactionRead]", "kind": "function", "signature": "( month: Optional[str] = Query(None, description=\"Filter by YYYY-MM\"), session: Session = Depends(get_session), )"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def login(payload: LoginRequest, session: Session = Depends(get_session)) -> TokenResponse:$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(payload: LoginRequest, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    month: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "BudgetUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    month: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    month: str = Field(..., description=\"Month in YYYY-MM format.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "BudgetBase", "scopeKind": "class"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    month: str = Field(..., description=\"Month in YYYY-MM format.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    month: str = SQLField(index=True)  # YYYY-MM$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Budget", "scopeKind": "class"}, {"_type": "tag", "name": "month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    month: str = SQLField(index=True)  # YYYY-MM$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    name: str = SQLField(index=True)$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    note: Optional[str] = Field(None, max_length=200)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionBase", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    note: Optional[str] = Field(None, max_length=200)$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    note: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def on_startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "previous_month_str", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def previous_month_str(dt: Optional[datetime] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(dt: Optional[datetime] = None)"}, {"_type": "tag", "name": "seed", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def seed(session: Session = Depends(get_session)) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "function", "signature": "(session: Session = Depends(get_session))"}, {"_type": "tag", "name": "seed_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^seed_router = APIRouter(prefix=\"\\/seed\", tags=[\"seed\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    token: str = Field(..., description=\"Mock token to be echoed by client for demo use.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "transactions", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    transactions: List[\"Transaction\"] = Relationship(back_populates=\"category\")$/", "language": "Python", "typeref": "typename:List[\"Transaction\"]", "kind": "variable", "scope": "Category", "scopeKind": "class"}, {"_type": "tag", "name": "transactions_router", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^transactions_router = APIRouter(prefix=\"\\/transactions\", tags=[\"transactions\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_budget", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def update_budget(budget_id: int, payload: BudgetUpdate, session: Session = Depends(get_session)/", "language": "Python", "typeref": "typename:BudgetRead", "kind": "function", "signature": "(budget_id: int, payload: BudgetUpdate, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "update_transaction", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^def update_transaction($/", "language": "Python", "typeref": "typename:TransactionRead", "kind": "function", "signature": "( transaction_id: int, payload: TransactionUpdate, session: Session = Depends(get_session) )"}, {"_type": "tag", "name": "validate_month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    def validate_month(cls, v: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "member", "signature": "(cls, v: Optional[str])", "scope": "BudgetUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "validate_month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    def validate_month(cls, v: Optional[str]) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "member", "signature": "(cls, v: Optional[str])", "scope": "TransactionUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "validate_month", "path": "/home/kavia/workspace/code-generation/monthly-budget-tracker-41011-41025/backend_api/src/api/main.py", "pattern": "/^    def validate_month(cls, v: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(cls, v: str)", "scope": "BudgetBase", "scopeKind": "class"}], "hash": "81c626b623f46d07487a8f76314991ac", "format-version": 4, "code-base-name": "backend_api", "filename": "backend_api/src/api/main.py", "fields": [{"name": "DATABASE_URL = \"sqlite:\\/\\/\\/.\\/budget.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[float] amount", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "float amount", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "api_router = APIRouter(prefix=\"\\/api\", tags=[\"API\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "auth_router = APIRouter(prefix=\"\\/auth\", tags=[\"auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[\"Budget\"] budgets", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "budgets_router = APIRouter(prefix=\"\\/budgets\", tags=[\"budgets\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "categories_router = APIRouter(prefix=\"\\/categories\", tags=[\"categories\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[Category] category", "scope": "Budget", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] category_id", "scope": "BudgetUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "int category_id", "scope": "BudgetBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str category_type", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "dashboard_router = APIRouter(prefix=\"\\/dashboard\", tags=[\"dashboard\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[date] date", "scope": "TransactionUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "date date", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, connect_args={\"check_same_thread\": False})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[int] id", "scope": "Budget", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[float] limit", "scope": "BudgetUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "float limit", "scope": "BudgetBase", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] month", "scope": "BudgetUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str month", "scope": "BudgetBase", "scopeKind": "class", "description": "unavailable"}, {"name": "str name", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] note", "scope": "TransactionBase", "scopeKind": "class", "description": "unavailable"}, {"name": "seed_router = APIRouter(prefix=\"\\/seed\", tags=[\"seed\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "List[\"Transaction\"] transactions", "scope": "Category", "scopeKind": "class", "description": "unavailable"}, {"name": "transactions_router = APIRouter(prefix=\"\\/transactions\", tags=[\"transactions\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}